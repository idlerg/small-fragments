<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="../comJs/zepeo1.2/zepto.js"></script>
    <script type="text/javascript" src="https://cdn.bootcss.com/html2canvas/0.5.0-beta4/html2canvas.js"></script>
    <script src="js/canvas2image.js"></script>
    <script src="js/fx.js"></script>

    <style>
        .card-bg {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            
        }
        .demoCon {
            display: block;
            width: 100%;
            height: 100%;
            /* background: url(images/fc_codeBgimg.png) no-repeat center center/100% 100%; */
        }
        .demoCon img {
            display: block;
            width: 100%;
            height: 100%;
        }
    </style>

</head>
<body>
    <body>
        <div class="card-bg">
            <div class="demoCon"><img src="images/fc_codeBgimg.png" alt=""></div>
        </div>
</body>
<script>
window.onload = function () {
    // console.log(document.getElementsByClassName('demoCon'));
canvasRenter()
    function canvasRenter() {
        var canvas2 = document.createElement("canvas");
        let _canvas = document.querySelector('.card-bg');//需要替换成图片的html区域
        //获取宽高
        var w = parseInt(window.getComputedStyle(_canvas).width);
        var h = parseInt(window.getComputedStyle(_canvas).height);
        //将canvas画布放大若干倍，然后盛放在较小的容器内，就显得不模糊了
        canvas2.width = w * 2;
        canvas2.height = h * 2;
        canvas2.style.width = w + "px";
        canvas2.style.height = h + "px";
        //可以按照自己的需求，对context的参数修改,translate指的是偏移量
        //  var context = canvas.getContext("2d");
        //  context.translate(0,0);
        var context = canvas2.getContext("2d");
        context.scale(1.85, 1.7);
        html2canvas(_canvas,{canvas:canvas2}).then(function(canvas) {
            let dom = document.getElementsByClassName('demoCon')[0]
            // console.log(document.getElementsByClassName('demoCon'));
            // $('.demoCon').
            dom.style.display = 'none';
            var imgUri = canvas.toDataURL("image/png").replace("image/png", "image/octet-stream"); // 获取生成的图片的url
            $(".card-bg").html('<img class="down" src="'+imgUri+'" style="width: 100%;">');
        })
    }
}
</script>
</body>
</html>